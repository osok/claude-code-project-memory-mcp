# Data Dictionary

**Version:** 1.0
**System:** Claude Code Long-Term Memory System
**Purpose:** Human-readable definitions of all data fields, types, constraints, and relationships

---

## Table of Contents

1. [Base Memory Schema](#1-base-memory-schema)
2. [Requirements Memory](#2-requirements-memory)
3. [Design Memory](#3-design-memory)
4. [Code Pattern Memory](#4-code-pattern-memory)
5. [Component Registry](#5-component-registry)
6. [Function Index](#6-function-index)
7. [Test History](#7-test-history)
8. [Session History](#8-session-history)
9. [User Preferences](#9-user-preferences)
10. [Graph Nodes](#10-graph-nodes)
11. [Graph Relationships](#11-graph-relationships)
12. [Validation Rules](#12-validation-rules)

---

## 1. Base Memory Schema

All memory types inherit these common fields:

### id
- **Type:** UUID v4
- **Required:** Yes
- **Constraints:** Must be globally unique across all memory types
- **Description:** Primary identifier for the memory entry
- **Format:** 8-4-4-4-12 hexadecimal string (e.g., `550e8400-e29b-41d4-a716-446655440000`)
- **Generation:** Automatically generated on creation

### type
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `requirements`, `design`, `code_pattern`, `component`, `function`, `test_history`, `session`, `user_preference`
- **Description:** Discriminator indicating which memory schema this entry follows
- **Usage:** Used for routing to appropriate collection and schema validation

### content
- **Type:** Text (string, unlimited length)
- **Required:** Yes
- **Description:** Primary content used for embedding generation; should capture semantic essence of the memory
- **Preparation:** Varies by type (see specific memory type sections)
- **Example (function):** `"authenticate(username: str, password: str) -> bool: Validates user credentials against database"`

### embedding
- **Type:** Array of floats
- **Required:** Yes
- **Constraints:** Exactly 1024 dimensions
- **Description:** Dense vector representation generated by Voyage-Code-3 model
- **Usage:** Enables semantic similarity search via cosine distance
- **Generation:** Computed from `content` field via Voyage AI API

### created_at
- **Type:** ISO8601 timestamp
- **Required:** Yes
- **Format:** `YYYY-MM-DDTHH:MM:SS.sssZ`
- **Description:** Timestamp when memory was first created
- **Immutable:** Yes (never changes after creation)

### updated_at
- **Type:** ISO8601 timestamp
- **Required:** Yes
- **Format:** `YYYY-MM-DDTHH:MM:SS.sssZ`
- **Description:** Timestamp of last modification to this memory
- **Updates:** Changed whenever any field is modified

### access_count
- **Type:** Integer
- **Required:** Yes
- **Constraints:** Non-negative (>= 0)
- **Default:** 0
- **Description:** Number of times this memory has been retrieved via search or direct access
- **Usage:** Used in importance scoring and retrieval ranking

### importance_score
- **Type:** Float
- **Required:** Yes
- **Constraints:** Range 0.0 to 1.0
- **Default:** 0.5
- **Description:** Priority indicator for retrieval ranking; combines explicit importance with access patterns
- **Calculation:** Can be manually set or computed from access_count, recency, and explicit flags

### neo4j_node_id
- **Type:** String
- **Required:** No
- **Description:** Reference to corresponding Neo4j node (for memory types with graph representation)
- **Format:** Neo4j internal node ID or memory_id reference
- **Usage:** Enables hybrid queries combining vector search and graph traversal

### sync_status
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `synced`, `pending`, `failed`
- **Default:** `synced`
- **Description:** Cross-store synchronization status between Qdrant and Neo4j
- **States:**
  - `synced`: Both stores consistent
  - `pending`: Neo4j write pending, retry in background
  - `failed`: Neo4j write failed 10+ times, requires manual intervention

### deleted
- **Type:** Boolean
- **Required:** Yes
- **Default:** false
- **Description:** Soft delete flag; when true, memory is excluded from search but retained
- **Retention:** Soft-deleted entries retained for 30 days, then permanently removed during normalization

### deleted_at
- **Type:** ISO8601 timestamp
- **Required:** No (only when deleted=true)
- **Format:** `YYYY-MM-DDTHH:MM:SS.sssZ`
- **Description:** Timestamp when memory was soft-deleted
- **Usage:** Used to calculate 30-day retention period

### metadata
- **Type:** JSON object
- **Required:** No
- **Description:** Flexible storage for type-specific additional data not in main schema
- **Examples:** Audit trail, user notes, system flags

---

## 2. Requirements Memory

Memory type for storing parsed requirements documents with traceability to implementing code.

### requirement_id
- **Type:** String
- **Required:** Yes
- **Constraints:** Must match pattern `REQ-[A-Z]{3,}-[A-Z]{2,}-[0-9]{3,}`
- **Description:** Unique requirement identifier
- **Format:** `REQ-<project>-<category>-<number>`
- **Examples:**
  - `REQ-MEM-FN-001` (functional requirement)
  - `REQ-INT-API-010` (interface requirement)
  - `REQ-NFR-PERF-005` (performance requirement)
- **Indexed:** Yes (keyword index in Qdrant, unique constraint in Neo4j)

### title
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Short, descriptive requirement title
- **Length:** Typically 50-100 characters
- **Example:** `"System shall provide semantic search across all memory types"`

### description
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Full requirement specification text
- **Length:** Typically 100-500 words
- **Content:** Should include intent, acceptance criteria, and verification method

### priority
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `Critical`, `High`, `Medium`, `Low`
- **Description:** Implementation priority level
- **Definitions:**
  - **Critical:** System cannot function without this
  - **High:** Core functionality, high user impact
  - **Medium:** Important but not blocking
  - **Low:** Nice-to-have, low impact
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### status
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `Draft`, `Approved`, `Implemented`, `Verified`
- **Description:** Current implementation status
- **Lifecycle:**
  1. `Draft` - Requirements gathering phase
  2. `Approved` - Ready for implementation
  3. `Implemented` - Code written
  4. `Verified` - Tests passing
- **Indexed:** Yes (keyword index in Qdrant)

### source_document
- **Type:** String
- **Required:** Yes
- **Description:** Source file path (relative to project root) where requirement is defined
- **Format:** POSIX path (forward slashes)
- **Example:** `"requirement-docs/requirements-memory-mcp.md"`
- **Indexed:** Yes (keyword index in Qdrant)

### implementing_components
- **Type:** Array of UUIDs
- **Required:** No
- **Description:** Component IDs that implement this requirement
- **Usage:** Establishes traceability from requirements to code
- **Updates:** Modified when components are linked via IMPLEMENTS_REQ relationship

---

## 3. Design Memory

Memory type for storing architectural decisions, ADRs, and design documents.

### design_type
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `ADR`, `Specification`, `Architecture`, `Interface`
- **Description:** Category of design document
- **Definitions:**
  - **ADR:** Architecture Decision Record (structured decision format)
  - **Specification:** Detailed component specification
  - **Architecture:** High-level system architecture
  - **Interface:** API or interface contract definition
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### title
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Design document title
- **Example:** `"ADR-002: Memory Storage Partitioning"`

### decision
- **Type:** Text (string)
- **Required:** No (required for `ADR` type)
- **Description:** Concise statement of the decision made (for ADRs)
- **Example:** `"Use Qdrant for vector storage and Neo4j for relationship tracking"`

### rationale
- **Type:** Text (string)
- **Required:** No
- **Description:** Reasoning and context for the design decision
- **Content:** Should explain why this approach was chosen over alternatives

### consequences
- **Type:** Text (string)
- **Required:** No
- **Description:** Trade-offs, implications, and impacts of the decision
- **Content:** Should list both positive and negative consequences

### related_requirements
- **Type:** Array of strings (requirement IDs)
- **Required:** No
- **Format:** Each element matches `REQ-[A-Z]{3,}-[A-Z]{2,}-[0-9]{3,}`
- **Description:** Requirement IDs this design addresses
- **Usage:** Establishes traceability from design to requirements

### affected_components
- **Type:** Array of UUIDs
- **Required:** No
- **Description:** Component IDs affected by this design decision
- **Usage:** Tracks design impact scope across the system

### status
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `Proposed`, `Accepted`, `Deprecated`, `Superseded`
- **Description:** Current status of the design decision
- **Lifecycle:**
  1. `Proposed` - Under consideration
  2. `Accepted` - Approved for implementation
  3. `Deprecated` - No longer recommended, maintained for legacy
  4. `Superseded` - Replaced by newer design

---

## 4. Code Pattern Memory

Memory type for storing reusable implementation templates and coding conventions.

### pattern_name
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Human-readable pattern name
- **Example:** `"BaseAgent Pattern"`, `"Repository Pattern"`
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### pattern_type
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `Template`, `Convention`, `Idiom`, `Architecture`
- **Description:** Category of code pattern
- **Definitions:**
  - **Template:** Base class or boilerplate code to extend
  - **Convention:** Naming, formatting, or structural convention
  - **Idiom:** Language-specific best practice
  - **Architecture:** High-level structural pattern (e.g., MVC, Repository)
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### language
- **Type:** String
- **Required:** Yes
- **Description:** Programming language the pattern applies to
- **Examples:** `"Python"`, `"TypeScript"`, `"Java"`, `"Go"`
- **Indexed:** Yes (keyword index in Qdrant)

### code_template
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Template code with placeholders for customization
- **Format:** Source code with placeholders like `{{CLASS_NAME}}`, `{{METHOD_NAME}}`
- **Example:**
  ```python
  class {{CLASS_NAME}}(BaseAgent):
      def execute(self) -> Result:
          # Implementation here
          pass
  ```

### usage_context
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** When and how to apply this pattern
- **Content:** Should explain applicability, prerequisites, and constraints
- **Example:** `"Use when implementing new sub-agents in the SDLC workflow. All agents should extend BaseAgent."`

### applicable_components
- **Type:** Array of strings
- **Required:** No
- **Description:** Component types this pattern applies to
- **Examples:** `["Agent", "Service", "Library"]`
- **Usage:** Used to suggest patterns when creating new components

### example_implementations
- **Type:** Array of strings
- **Required:** No
- **Description:** File paths (relative to project root) of reference implementations
- **Format:** POSIX paths
- **Example:** `["src/agents/requirements-agent.py", "src/agents/design-agent.py"]`

---

## 5. Component Registry

Memory type for tracking all system components and their relationships.

### component_id
- **Type:** String
- **Required:** Yes
- **Constraints:** Must be unique across all components
- **Description:** Unique component identifier
- **Format:** Typically kebab-case or dot-notation
- **Examples:** `"auth-service"`, `"frontend.auth.login"`, `"memory.service"`
- **Indexed:** Yes (keyword index in Qdrant, unique constraint in Neo4j)

### component_type
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `Frontend`, `Backend`, `Agent`, `Library`, `Service`, `Database`
- **Description:** Category of component
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### name
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Human-readable component name
- **Example:** `"Authentication Service"`, `"Requirements Agent"`
- **Indexed:** Yes (keyword index in Neo4j)

### file_path
- **Type:** String
- **Required:** Yes
- **Constraints:** Non-empty, valid path
- **Description:** Primary file location (relative to project root)
- **Format:** POSIX path
- **Example:** `"src/services/auth.py"`, `"src/agents/requirements.ts"`

### public_interface
- **Type:** JSON object
- **Required:** No
- **Description:** Structured description of exported functions, classes, and types
- **Schema:**
  ```json
  {
    "exports": [
      {
        "name": "authenticate",
        "type": "function",
        "signature": "authenticate(username: str, password: str) -> bool"
      }
    ]
  }
  ```
- **Usage:** Enables semantic search for available functionality

### dependencies
- **Type:** Array of strings (component IDs)
- **Required:** No
- **Description:** Component IDs this component depends on
- **Usage:** Establishes DEPENDS_ON relationships in Neo4j graph

### dependents
- **Type:** Array of strings (component IDs)
- **Required:** No
- **Description:** Component IDs that depend on this component
- **Usage:** Reverse dependency tracking for impact analysis

### base_pattern
- **Type:** UUID
- **Required:** No
- **Description:** Pattern ID if this component extends a base pattern
- **Usage:** Links to Code Pattern memory, establishes USES_PATTERN relationship

### version
- **Type:** String
- **Required:** No
- **Constraints:** Must match semantic versioning pattern `X.Y.Z`
- **Format:** `<major>.<minor>.<patch>`
- **Example:** `"1.0.0"`, `"2.3.1"`

---

## 6. Function Index

Memory type for indexing all functions in the codebase for duplicate detection and semantic search.

### function_id
- **Type:** UUID v4
- **Required:** Yes
- **Constraints:** Globally unique
- **Description:** Unique function identifier
- **Generation:** Automatically generated during indexing
- **Indexed:** Yes (keyword index in Qdrant)

### name
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Function or method name
- **Example:** `"authenticate"`, `"calculateTotalPrice"`
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### signature
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Full function signature including parameters and return type
- **Format:** Language-specific syntax
- **Examples:**
  - Python: `"authenticate(username: str, password: str) -> bool"`
  - TypeScript: `"authenticate(username: string, password: string): boolean"`

### file_path
- **Type:** String
- **Required:** Yes
- **Constraints:** Non-empty, valid path
- **Description:** Source file location (relative to project root)
- **Format:** POSIX path
- **Example:** `"src/services/auth.py"`
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### start_line
- **Type:** Integer
- **Required:** Yes
- **Constraints:** >= 1
- **Description:** Line number where function definition starts
- **Usage:** Enables precise code location for duplicate reporting

### end_line
- **Type:** Integer
- **Required:** Yes
- **Constraints:** >= start_line
- **Description:** Line number where function definition ends
- **Usage:** Enables precise code location for duplicate reporting

### language
- **Type:** String
- **Required:** Yes
- **Description:** Programming language
- **Examples:** `"Python"`, `"TypeScript"`, `"Java"`
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### docstring
- **Type:** Text (string)
- **Required:** No
- **Description:** Function documentation string or comment block
- **Content:** Extracted from code comments (language-specific format)
- **Usage:** Included in embedding for semantic search

### containing_class
- **Type:** UUID
- **Required:** No
- **Description:** Parent class ID if this is a method (not a standalone function)
- **Usage:** Establishes class-method relationship in Neo4j

### calls
- **Type:** Array of UUIDs
- **Required:** No
- **Description:** Function IDs that this function calls
- **Usage:** Establishes CALLS relationships in Neo4j graph

### called_by
- **Type:** Array of UUIDs
- **Required:** No
- **Description:** Function IDs that call this function
- **Usage:** Reverse call graph for impact analysis

---

## 7. Test History

Memory type for tracking test executions, failures, and fixes.

### test_id
- **Type:** UUID v4
- **Required:** Yes
- **Constraints:** Globally unique
- **Description:** Unique test identifier
- **Generation:** Generated on first test execution
- **Indexed:** Yes (keyword index in Qdrant)

### test_name
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Test function or method name
- **Example:** `"test_authenticate_valid_credentials"`, `"test_duplicate_detection"`
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### test_file
- **Type:** String
- **Required:** Yes
- **Constraints:** Non-empty, valid path
- **Description:** Test file path (relative to project root)
- **Format:** POSIX path
- **Example:** `"tests/test_auth.py"`
- **Indexed:** Yes (keyword index in Qdrant and Neo4j)

### execution_time
- **Type:** ISO8601 timestamp
- **Required:** Yes
- **Format:** `YYYY-MM-DDTHH:MM:SS.sssZ`
- **Description:** When the test was executed
- **Usage:** Enables temporal analysis of test history
- **Indexed:** Yes (datetime index in Qdrant)

### status
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `Passed`, `Failed`, `Skipped`, `Error`
- **Description:** Test execution result
- **Definitions:**
  - **Passed:** Test executed successfully
  - **Failed:** Assertion failure
  - **Skipped:** Test skipped (conditional or marked skip)
  - **Error:** Test raised unexpected exception
- **Indexed:** Yes (keyword index in Qdrant)

### failure_message
- **Type:** Text (string)
- **Required:** No (required when status is Failed or Error)
- **Description:** Error message or stack trace
- **Content:** Full error output from test framework
- **Usage:** Used for debugging and fix correlation

### affected_component
- **Type:** UUID
- **Required:** No
- **Description:** Component ID under test
- **Usage:** Links test to component, establishes TESTS relationship
- **Indexed:** Yes (keyword index in Qdrant)

### related_requirements
- **Type:** Array of strings (requirement IDs)
- **Required:** No
- **Format:** Each element matches `REQ-[A-Z]{3,}-[A-Z]{2,}-[0-9]{3,}`
- **Description:** Requirement IDs this test verifies
- **Usage:** Enables requirements coverage analysis

### fix_applied
- **Type:** Text (string)
- **Required:** No
- **Description:** Description of fix applied to resolve test failure
- **Content:** Should explain what was changed and why
- **Example:** `"Updated authentication logic to handle null passwords correctly"`

### fix_commit
- **Type:** String
- **Required:** No
- **Constraints:** Must match git commit SHA pattern `[a-f0-9]{7,40}`
- **Description:** Git commit SHA of the fix
- **Format:** 7-40 character hex string
- **Example:** `"a3f8d92"`, `"a3f8d92c5e7b1234567890abcdef1234567890ab"`

### design_alignment_score
- **Type:** Float
- **Required:** No
- **Constraints:** Range 0.0 to 1.0
- **Description:** How well the fix aligns with original design intent
- **Calculation:** Computed by comparing fix against design documents
- **Usage:** Detects design drift during debugging

---

## 8. Session History

Memory type for capturing key decisions and learnings from development sessions.

### session_id
- **Type:** UUID v4
- **Required:** Yes
- **Constraints:** Globally unique
- **Description:** Unique session identifier
- **Generation:** Generated at session start
- **Indexed:** Yes (keyword index in Qdrant)

### start_time
- **Type:** ISO8601 timestamp
- **Required:** Yes
- **Format:** `YYYY-MM-DDTHH:MM:SS.sssZ`
- **Description:** Session start timestamp
- **Indexed:** Yes (datetime index in Qdrant)

### end_time
- **Type:** ISO8601 timestamp
- **Required:** No (set when session ends)
- **Format:** `YYYY-MM-DDTHH:MM:SS.sssZ`
- **Description:** Session end timestamp
- **Indexed:** Yes (datetime index in Qdrant)

### summary
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Brief session summary
- **Length:** Typically 1-3 sentences
- **Example:** `"Implemented authentication service with JWT token generation. Added unit tests and integration tests."`

### key_decisions
- **Type:** Array of text strings
- **Required:** No
- **Description:** Important decisions made during the session
- **Format:** Each element is a concise decision statement
- **Example:** `["Use JWT for token-based auth", "Store refresh tokens in Redis", "Implement rate limiting at API gateway"]`

### components_modified
- **Type:** Array of UUIDs
- **Required:** No
- **Description:** Component IDs modified in this session
- **Usage:** Tracks session impact scope

### memories_created
- **Type:** Array of UUIDs
- **Required:** No
- **Description:** Memory IDs created during this session
- **Usage:** Tracks knowledge capture productivity

### outcome
- **Type:** Text (string)
- **Required:** No
- **Description:** Session outcome description
- **Content:** Summary of what was accomplished or blocked
- **Example:** `"Successfully completed authentication feature. Blocked on database migration approval."`

---

## 9. User Preferences

Memory type for storing coding style preferences, framework conventions, and tool configurations.

### preference_id
- **Type:** UUID v4
- **Required:** Yes
- **Constraints:** Globally unique
- **Description:** Unique preference identifier
- **Indexed:** Yes (keyword index in Qdrant)

### category
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `CodingStyle`, `Naming`, `Framework`, `Tool`, `Convention`
- **Description:** Preference category
- **Definitions:**
  - **CodingStyle:** Indentation, formatting, quote style
  - **Naming:** Variable, function, class naming conventions
  - **Framework:** Framework-specific patterns and idioms
  - **Tool:** Tool configurations and preferences
  - **Convention:** Project-specific coding conventions
- **Indexed:** Yes (keyword index in Qdrant)

### key
- **Type:** Text (string)
- **Required:** Yes
- **Constraints:** Non-empty
- **Description:** Preference key (dot-notation for hierarchy)
- **Examples:** `"indent_style"`, `"quote_style"`, `"naming.function.case"`

### value
- **Type:** JSON (flexible type)
- **Required:** Yes
- **Description:** Preference value (can be string, number, boolean, array, or object)
- **Examples:**
  - String: `"spaces"`
  - Number: `4`
  - Boolean: `true`
  - Array: `["error", "warn", "info"]`
  - Object: `{"indent": 2, "semicolons": false}`

### scope
- **Type:** String (enum)
- **Required:** Yes
- **Valid Values:** `Global`, `Language`, `Project`, `Component`
- **Description:** Where this preference applies
- **Definitions:**
  - **Global:** Applies to all code
  - **Language:** Applies to specific language (e.g., Python only)
  - **Project:** Applies to current project
  - **Component:** Applies to specific component
- **Indexed:** Yes (keyword index in Qdrant)

### examples
- **Type:** Array of text strings
- **Required:** No
- **Description:** Code snippets demonstrating the preference
- **Format:** Each element is a code example
- **Example:**
  ```python
  [
    "# Good: Use 4 spaces for indentation\ndef authenticate(user):\n    return True",
    "# Bad: Do not use tabs\ndef authenticate(user):\n\treturn True"
  ]
  ```

---

## 10. Graph Nodes

Neo4j node definitions with properties and constraints.

### Function Node
- **Labels:** `Function`
- **Properties:**
  - `memory_id` (String, UNIQUE) - Reference to Qdrant memory
  - `name` (String, INDEXED) - Function name
  - `file_path` (String, INDEXED) - Source file path
  - `signature` (String) - Full function signature
  - `language` (String, INDEXED) - Programming language
- **Purpose:** Enables call graph traversal and dependency analysis

### Class Node
- **Labels:** `Class`
- **Properties:**
  - `memory_id` (String, UNIQUE) - Reference to Qdrant memory
  - `name` (String, INDEXED) - Class name
  - `file_path` (String, INDEXED) - Source file path
  - `language` (String, INDEXED) - Programming language
- **Purpose:** Tracks inheritance hierarchies and interface implementations

### Module Node
- **Labels:** `Module`
- **Properties:**
  - `name` (String, INDEXED) - Module/package name
  - `file_path` (String, UNIQUE with language) - Module file or directory
  - `language` (String) - Programming language
- **Purpose:** Tracks import dependencies and module structure

### File Node
- **Labels:** `File`
- **Properties:**
  - `path` (String, UNIQUE) - Absolute file path
  - `language` (String, INDEXED) - Programming language
  - `content_hash` (String) - SHA-256 hash of content
  - `indexed_at` (DateTime) - Last index timestamp
- **Purpose:** Root container for functions and classes

### Component Node
- **Labels:** `Component`
- **Properties:**
  - `memory_id` (String, UNIQUE) - Reference to Qdrant memory
  - `component_id` (String, UNIQUE) - Component identifier
  - `name` (String, INDEXED) - Component name
  - `type` (String, INDEXED) - Component type
- **Purpose:** High-level component dependency tracking

### Requirement Node
- **Labels:** `Requirement`
- **Properties:**
  - `memory_id` (String, UNIQUE) - Reference to Qdrant memory
  - `requirement_id` (String, UNIQUE) - REQ-XXX-NNN identifier
  - `title` (String) - Requirement title
  - `priority` (String, INDEXED) - Priority level
- **Purpose:** Requirements traceability to code

### Design Node
- **Labels:** `Design`
- **Properties:**
  - `memory_id` (String, UNIQUE) - Reference to Qdrant memory
  - `title` (String, INDEXED) - Design document title
  - `design_type` (String, INDEXED) - Document type
- **Purpose:** Design alignment tracking

### Pattern Node
- **Labels:** `Pattern`
- **Properties:**
  - `memory_id` (String, UNIQUE) - Reference to Qdrant memory
  - `pattern_name` (String, INDEXED) - Pattern name
  - `pattern_type` (String, INDEXED) - Pattern category
- **Purpose:** Pattern usage tracking

### Test Node
- **Labels:** `Test`
- **Properties:**
  - `memory_id` (String, UNIQUE) - Reference to Qdrant memory
  - `test_name` (String, INDEXED) - Test name
  - `test_file` (String, INDEXED) - Test file path
- **Purpose:** Test coverage analysis

---

## 11. Graph Relationships

Neo4j relationship definitions with properties and cardinality.

### CALLS
- **Direction:** Caller -> Callee
- **From:** Function
- **To:** Function
- **Properties:**
  - `created_at` (DateTime) - When relationship created
  - `line_number` (Integer, optional) - Line where call occurs
- **Cardinality:** N:M (many-to-many)
- **Purpose:** Call graph traversal and impact analysis

### IMPORTS
- **Direction:** Importer -> Imported
- **From:** File, Module
- **To:** Module, File
- **Properties:**
  - `created_at` (DateTime) - When relationship created
  - `items` (List[String], optional) - Specific items imported
- **Cardinality:** N:M
- **Purpose:** Module dependency analysis

### EXTENDS
- **Direction:** Child -> Parent
- **From:** Class
- **To:** Class
- **Properties:**
  - `created_at` (DateTime) - When relationship created
- **Cardinality:** N:M (some languages support multiple inheritance)
- **Purpose:** Inheritance hierarchy traversal

### IMPLEMENTS
- **Direction:** Implementor -> Interface
- **From:** Class
- **To:** Class
- **Properties:**
  - `created_at` (DateTime) - When relationship created
- **Cardinality:** N:M
- **Purpose:** Interface implementation tracking

### CONTAINS
- **Direction:** Container -> Contained
- **From:** File, Class
- **To:** Function, Class
- **Properties:**
  - `created_at` (DateTime) - When relationship created
- **Cardinality:** 1:N (one container to many contained)
- **Purpose:** Code structure hierarchy

### DEPENDS_ON
- **Direction:** Dependent -> Dependency
- **From:** Component
- **To:** Component
- **Properties:**
  - `created_at` (DateTime) - When relationship created
  - `dependency_type` (String, optional) - Runtime/Build/Optional
- **Cardinality:** N:M
- **Purpose:** Component dependency analysis

### IMPLEMENTS_REQ
- **Direction:** Code -> Requirement
- **From:** Component, Function, Class
- **To:** Requirement
- **Properties:**
  - `created_at` (DateTime) - When relationship created
  - `completeness` (Float, optional) - Implementation completeness (0.0-1.0)
- **Cardinality:** N:M
- **Purpose:** Requirements traceability

### FOLLOWS_DESIGN
- **Direction:** Code -> Design
- **From:** Component, Function, Class
- **To:** Design
- **Properties:**
  - `created_at` (DateTime) - When relationship created
- **Cardinality:** N:M
- **Purpose:** Design alignment validation

### USES_PATTERN
- **Direction:** Code -> Pattern
- **From:** Component, Class
- **To:** Pattern
- **Properties:**
  - `created_at` (DateTime) - When relationship created
- **Cardinality:** N:M
- **Purpose:** Pattern usage tracking and consistency checks

### TESTS
- **Direction:** Test -> Tested
- **From:** Test
- **To:** Component, Function, Class
- **Properties:**
  - `created_at` (DateTime) - When relationship created
  - `last_result` (String, optional) - Passed/Failed/Skipped
- **Cardinality:** N:M
- **Purpose:** Test coverage analysis

---

## 12. Validation Rules

### UUID Format
- **Pattern:** `[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[89ab][a-f0-9]{3}-[a-f0-9]{12}`
- **Version:** UUID v4
- **Example:** `550e8400-e29b-41d4-a716-446655440000`

### Requirement ID Format
- **Pattern:** `REQ-[A-Z]{3,}-[A-Z]{2,}-[0-9]{3,}`
- **Examples:**
  - Valid: `REQ-MEM-FN-001`, `REQ-INT-API-010`, `REQ-NFR-PERF-005`
  - Invalid: `REQ-M-F-1`, `REQ-mem-fn-001`, `REQ-MEM-FN`

### Git Commit SHA Format
- **Pattern:** `[a-f0-9]{7,40}`
- **Examples:**
  - Valid: `a3f8d92`, `a3f8d92c5e7b1234567890abcdef1234567890ab`
  - Invalid: `A3F8D92`, `a3f8d`, `g3f8d92`

### Semantic Version Format
- **Pattern:** `[0-9]+\.[0-9]+\.[0-9]+`
- **Examples:**
  - Valid: `1.0.0`, `2.3.1`, `10.20.30`
  - Invalid: `1.0`, `v1.0.0`, `1.0.0-beta`

### ISO8601 Timestamp Format
- **Pattern:** `YYYY-MM-DDTHH:MM:SS.sssZ`
- **Example:** `2026-01-30T15:30:00.000Z`
- **Timezone:** Always UTC (Z suffix)

### Embedding Vector Constraints
- **Dimensions:** Exactly 1024
- **Type:** Array of floats
- **Range:** Typically normalized to unit length (cosine distance)

### Importance Score Constraints
- **Type:** Float
- **Range:** 0.0 to 1.0 (inclusive)
- **Precision:** 2 decimal places recommended

### Access Count Constraints
- **Type:** Integer
- **Range:** >= 0
- **Monotonic:** Only increases (never decreases)

### Line Number Constraints
- **Type:** Integer
- **Range:** >= 1
- **Invariant:** `end_line >= start_line`

### File Path Constraints
- **Format:** POSIX paths (forward slashes)
- **Relativity:** Relative to project root
- **Examples:** `src/services/auth.py`, `tests/test_auth.py`

---

## Appendix: Cross-Store References

### Qdrant to Neo4j
- **Mechanism:** `neo4j_node_id` field in Qdrant payload
- **Format:** Neo4j internal ID or memory_id reference
- **Usage:** Enables hybrid queries starting from Qdrant

### Neo4j to Qdrant
- **Mechanism:** `memory_id` property on Neo4j nodes
- **Format:** UUID v4 matching Qdrant point ID
- **Usage:** Enables hybrid queries starting from Neo4j

### Consistency Validation
- **Frequency:** During normalization
- **Check:** Verify bidirectional references exist and match
- **Repair:** Flag inconsistencies for manual review

---

**End of Data Dictionary**
